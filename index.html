<!doctype html>
<html lang="en">
<head>
   <meta charset="utf-8">
<link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAZ4efAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEREREREREAEAAAAAAAAQAQEREREREBABAREREREQEAEBERERERAQAQEREREREBABAREREREQEAEBERERERAQAQEREREREBABAREREREQEAEBERERERAQAQEREREREBABAAAAAAAAEAEREREREREQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rel="icon" type="image/x-icon">
            <!--Stop Google:-->
    <META NAME="robots" CONTENT="noindex,nofollow">

   <title>LETTER A!</title>    
   <!--

   -->
<script src="https://cdn.jsdelivr.net/npm/p5@1.7.0/lib/p5.js"></script>
</head>
<body> 
<style>
    body{
        background-color:#9f8767;
        font-family:Comic Sans MS;
        font-size:2em;
    }
    a{
        display:block;
    }
    main{
        position:absolute;
        left:0px;
        top:0px;
    }
    #scroll{
        position:absolute;
        right:0px;
        top:0px;
        bottom:0px;
        overflow:scroll;
        padding-left:1em;
    }
</style>
<div id = "scroll">
    <A HREF = "../">../</A>
    <a href = "edit-index.html">edit-index.html</a>
    <a href = "edit-html.html">edit-html.html</a>
    <a href = "edit-php.html">edit-php.html</a>
    <a href = "flag.html">flag.html</a> 
    <a href = "readme.html">readme.html</a>
    <a href= "branch.html">branch.html</a>
    <a href = "glyph.json">glyph.json</a>


</div>

<script>

unit = 100;
letter  = [];
glyph = [];
function setup(){
    if(innerWidth > innerHeight){
        unit = innerHeight - 50;
        document.getElementById("scroll").style.left  = unit.toString() + "px";
    }
    else{
        unit = innerWidth - 50;
    }
    createCanvas(unit, unit);
    background(159,135,103);
    stroke(0);
    strokeWeight(1);
    var point = {
        "x":0,
        "y":1
    }
    letter.push(point);
}

quantum = 0.02;

function draw() {
  
    background(0);
    stroke("red");
    fill("red");
    x = mouseX;
    y = mouseY;
    x = quantum*Math.round(x/(quantum*unit))
    y = quantum*Math.round(y/(quantum*unit))

    stroke("#ff2cb4");
    fill("#ff2cb4");
    beginShape();
    for(var index = 0;index < glyph.length;index++){
        vertex(glyph[index].x*unit,glyph[index].y*unit);
    }
    endShape(CLOSE);
    
    stroke("red");
    fill("red");
    beginShape();
    for(var index = 0;index < letter.length;index++){
        vertex(letter[index].x*unit,letter[index].y*unit);
    }
    vertex(x*unit,y*unit);
    endShape(CLOSE);

    circle(x*unit,y*unit,5);

}

function mouseClicked() {   
    var point = {
        "x":x,
        "y":y
    }
    letter.push(point);
}

glyph = [];

function keyPressed() {
  if (keyCode  === DELETE) {
        letter.pop();
  }
  if(key == ' '){
    var point = {
        "x":x,
        "y":y
    }
    letter.push(point);
  }
  if(keyCode === RETURN){
      glyph = JSON.parse(JSON.stringify(letter,null,"   "));
      saveletter();
  }
}

var httpc = new XMLHttpRequest();
httpc.onreadystatechange = function(){
    if (this.readyState == 4 && this.status == 200) {
        glyph = JSON.parse(this.responseText);
    }
};
httpc.open("GET", "load-file.php?filename=glyph.json", true);
httpc.send();

function saveletter(){
    var url = "save-file.php";        
    var httpc = new XMLHttpRequest();
    httpc.open("POST", url, true);
    httpc.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    httpc.send("data="+encodeURIComponent(JSON.stringify(glyph,null,"    "))+"&filename=glyph.json");//send text to filesaver.php
    
}
</script>
</body>
</html>


    
    
